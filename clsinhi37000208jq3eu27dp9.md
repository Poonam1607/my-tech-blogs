---
title: "SigNoz - A complete setup tour"
datePublished: Mon Feb 12 2024 08:06:30 GMT+0000 (Coordinated Universal Time)
cuid: clsinhi37000208jq3eu27dp9
slug: signoz-a-complete-setup-tour
cover: https://cdn.hashnode.com/res/hashnode/image/upload/v1707724705740/ddf3249e-ea76-42c0-a6a6-9a289adcbf6e.png
ogImage: https://cdn.hashnode.com/res/hashnode/image/upload/v1707725159302/82d144e2-ca1e-4a9e-998d-bf249801e3a9.png
tags: opensource, monitoring, logging, signoz, monitoring-tool

---

In this blog we will be going on hands-on journey, setting up Docker log collections and host metrics collections for enhanced monitoring.

## Architecture

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1707725062283/257b8323-d3bc-4f5b-b165-6b651fe0f6f5.png align="center")

**Source** - An application hosted on an AWS EC2 instance.

**Destination** - SigNoz, operational on a separate EC2 instance.

**Path** - We'll extract Docker logs and host metrics from the application, forwarding them to the SigNoz OpenTelemetry (otel) collector, ultimately visualizing the logs within the SigNoz dashboard.

## Source Setup

***AWS EC2 Instance -&gt; Dockerised Application -&gt; Log Collector***

Ensure your **Dockerized** application is up and running. For demonstration purposes, we'll employ a sample application generating continuous random logs.

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1707722139121/8969ef43-ee41-4c93-9fce-79c00e4c669f.png align="center")

As we can see, the application is generating a stream of random logs.

## Destination Setup

Let's configure SigNoz now.

1. I have taken t3.micro as instance type, If you intend to set up SigNoz for your organization, handling logs from 10-15 applications, a t3.medium instance would be more suitable. However, the choice ultimately hinges on the nature of the applications. So choose wisely.
    
2. For now, I'm opening the entire port range, a practice certainly not recommended. This is solely for the demo purpose. We will discuss later about the necessary ports.
    
3. There are many ways to setup signoz application, but here we're using Docker Standalone method. You can explore all the possible ways [here](https://signoz.io/docs/install/).
    
4. Don't forget to checkout the prerequisites section!
    
5. Follow the below commands -
    
    ```plaintext
    $ git clone -b main https://github.com/SigNoz/signoz.git && cd signoz/deploy/
    $ docker compose -f docker/clickhouse-setup/docker-compose.yaml up -d
    $ docker ps
    ```
    
6. With just two commands, SigNoz is **up** and **running**. We can access the dashboard at `http://<IP-ADDRESS>:3301/`.
    

## Logs Setup

### SigNoz Part

In the SigNoz setup, the [**OTel-Collector**](https://opentelemetry.io/docs/collector/) will be receiving the Docker logs of the applications on port `2255`.

1. Thus, we need to open port `2255` inside the `docker-compose.yml` file in the SigNoz setup.
    
    ```plaintext
    .... otel-collector: 
             image: signoz/signoz-otel-collector:latest 
             command: ["--config=/etc/otel-collector-config.yaml"]
             ports:
                - "2255:2255"
    ```
    
2. Now, SigNoz's Otel-Collector stands prepared to receive Docker logs.
    

### Application Part

Within the application's server, we'll utilize a **Logspout** container. This container will collect all the logs from other containers and forward them to the SigNoz server.

> [Logspout](https://github.com/gliderlabs/logspout) is an open source log router, which collects logs from all the other containers running on same host and forwards them to a destination of your choice which in our case it's SigNoz

Run the below commands for logspout

```plaintext
$ docker run --name log-collector \
        --volume=/var/run/docker.sock:/var/run/docker.sock \
        gliderlabs/logspout \
        syslog+tcp://<host>:2255
```

In `<host>` enter the **IP address** of the server where signoz is running.

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1707690259449/06a334e7-06cb-4243-9ac1-537dc75ff064.png align="center")

As we can see, two containers are running, "`myapp`" and "`log-collector`"

Now, let's check the **dashboard** of signoz.

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1707690357844/3e071494-7fb1-4c8d-bc6c-88d22423b28b.png align="center")

We are getting some logs in the Logs section. Click on logs detail icon.

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1707690438196/d0705939-2ab6-470e-832c-100a47e4adcb.png align="center")

We can see our application's details here.

## Metrics Setup

### SigNoz Part

In SigNoz document, they have a `JSON` format file that will create a pre-built dashboard.

Copy the below code or you can download it from [here](https://github.com/SigNoz/dashboards/blob/main/hostmetrics/hostmetrics-with-variable.json).

```plaintext
{ "description": "", "layout": [ { "h": 2, "i": "959dab82-07ef-45fb-8889-9c79b0a5735d", "moved": false, "static": false, "w": 6, "x": 6, "y": 2 }, { "h": 2, "i": "84adebba-baf9-455a-b742-b0c23c27a6cc", "moved": false, "static": false, "w": 3, "x": 0, "y": 4 }, { "h": 2, "i": "115b6abf-eaa5-4d89-a117-abefb755a8aa", "moved": false, "static": false, "w": 3, "x": 6, "y": 4 }, { "h": 2, "i": "7ac947df-7394-4dcb-9fe0-05ee45f23794", "moved": false, "static": false, "w": 3, "x": 9, "y": 4 }, { "h": 2, "i": "c99de411-fcf6-475c-a246-f8ac3e2f2b10", "moved": false, "static": false, "w": 3, "x": 3, "y": 4 }, { "h": 2, "i": "18fa7157-0081-4348-b633-26cfe65ccba8", "moved": false, "static": false, "w": 6, "x": 0, "y": 10 }, { "h": 2, "i": "e55a1b9c-dfb1-4b5a-b203-f1966a3a0cc5", "moved": false, "static": false, "w": 6, "x": 6, "y": 10 }, { "h": 2, "i": "13031601-b6d4-47c8-ab81-b64c28b8defd", "moved": false, "static": false, "w": 6, "x": 6, "y": 12 }, { "h": 2, "i": "7643eb3f-2dd6-4a21-803e-516e853f92e3", "moved": false, "static": false, "w": 6, "x": 0, "y": 12 }, { "h": 2, "i": "fb03ba5a-adb4-42fd-a082-adec2af1770e", "moved": false, "static": false, "w": 6, "x": 0, "y": 6 }, { "h": 2, "i": "bfd7825c-c9bc-4e7b-891b-1225eece07d8", "moved": false, "static": false, "w": 6, "x": 6, "y": 14 }, { "h": 2, "i": "ba153238-e3b2-4107-adb0-03c1ae1af905", "moved": false, "static": false, "w": 6, "x": 0, "y": 14 }, { "h": 2, "i": "d52bf781-af94-4a7e-b70d-816522065801", "moved": false, "static": false, "w": 6, "x": 0, "y": 16 }, { "h": 2, "i": "ea994cb5-a911-4d49-8d60-440b66e78c2f", "moved": false, "static": false, "w": 2, "x": 0, "y": 0 }, { "h": 2, "i": "b9459168-fe63-4c58-b6a9-4d47accfa8ea", "moved": false, "static": false, "w": 6, "x": 6, "y": 6 }, { "h": 2, "i": "315f1b8d-4ca4-4795-9335-42190bd1ab57", "moved": false, "static": false, "w": 2, "x": 8, "y": 0 }, { "h": 2, "i": "a762f563-81a2-41a7-b85e-d9e8d5b8cac9", "moved": false, "static": false, "w": 3, "x": 2, "y": 0 }, { "h": 2, "i": "9da0e5b3-5a56-4619-92ce-2b43fb9af844", "moved": false, "static": false, "w": 3, "x": 5, "y": 0 }, { "h": 2, "i": "0d371069-67b9-49e5-8a73-a55568390f81", "moved": false, "static": false, "w": 3, "x": 0, "y": 2 }, { "h": 2, "i": "1d79cd03-e79d-44e4-9016-6396b7d3ab26", "moved": false, "static": false, "w": 3, "x": 3, "y": 2 }, { "h": 2, "i": "96529349-b3fb-481f-82db-75e75cf20af1", "moved": false, "static": false, "w": 6, "x": 0, "y": 8 }, { "h": 2, "i": "69bad098-ea78-46a1-81b2-6eb7b54b9b75", "moved": false, "static": false, "w": 6, "x": 6, "y": 8 }, { "h": 2, "i": "b637ca7e-a03a-4b49-9344-6406ee66d313", "moved": false, "static": false, "w": 2, "x": 10, "y": 0 }, { "h": 2, "i": "16ddaf59-bad7-4559-96c2-c8c3eb4f9cd9", "moved": false, "static": false, "w": 6, "x": 6, "y": 16 } ], "name": "", "tags": ["hostmetrics", "signoz"], "title": "HostMetrics Dashboard - SigNoz", "variables": { "hostname": { "customValue": "", "description": "Hostname of the instance", "modificationUUID": "f8ed0d75-f0e7-4c82-978e-22bfe98a5c2b", "multiSelect": false, "name": "hostname", "queryValue": "SELECT DISTINCT(JSONExtractString(labels, 'host_name'))\nFROM signoz_metrics.time_series_v2\nWHERE not has(JSONExtractKeys(labels), 'k8s_node_name')", "selectedValue": "", "showALLOption": false, "sort": "DISABLED", "textboxValue": "", "type": "QUERY" } }, "widgets": [ { "description": "", "id": "959dab82-07ef-45fb-8889-9c79b0a5735d", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "graph", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "{{state}}", "name": "A", "query": "system_memory_usage{host_name="{{.hostname}}",state=~"buffered|cached|free|used"}" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "Memory Usage", "yAxisUnit": "bytes" }, { "description": "", "id": "84adebba-baf9-455a-b742-b0c23c27a6cc", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "graph", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "{{state}}", "name": "A", "query": "avg by(state) (irate(system_cpu_time{host_name="{{.hostname}}",state!="idle"}[5m]))" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "CPU Utilisation", "yAxisUnit": "percentunit" }, { "description": "", "id": "115b6abf-eaa5-4d89-a117-abefb755a8aa", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "graph", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "{{device}}", "name": "A", "query": "system_filesystem_usage{host_name="{{.hostname}}",state="used",device!~"/dev/loop.", device!~"tmpfs|nsfs"}" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "Used Diskspace", "yAxisUnit": "bytes" }, { "description": "", "id": "7ac947df-7394-4dcb-9fe0-05ee45f23794", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "graph", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "{{device}}", "name": "A", "query": "system_filesystem_usage{host_name="{{.hostname}}",state="free",device!~"/dev/loop.", device!~"tmpfs | nsfs"}" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "Avaiable Disk", "yAxisUnit": "bytes" }, { "description": "", "id": "c99de411-fcf6-475c-a246-f8ac3e2f2b10", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "graph", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "{{state}}", "name": "A", "query": "avg by(state) (irate(system_cpu_time{host_name="{{.hostname}}",state="idle"}[5m]))" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "CPU Idle", "yAxisUnit": "percentunit" }, { "description": "", "id": "18fa7157-0081-4348-b633-26cfe65ccba8", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "graph", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "{{direction}}", "name": "A", "query": "avg by(direction) (irate(system_network_io{host_name="{{.hostname}}"}[5m]))" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "Total Network IO", "yAxisUnit": "binBps" }, { "description": "", "id": "e55a1b9c-dfb1-4b5a-b203-f1966a3a0cc5", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "graph", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "{{device}}-{{direction}}", "name": "A", "query": "irate(system_network_io{host_name="{{.hostname}}"}[5m])" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "Independent Network IO", "yAxisUnit": "binBps" }, { "description": "", "id": "13031601-b6d4-47c8-ab81-b64c28b8defd", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "graph", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "{{device}}-{{direction}}", "name": "A", "query": "irate(system_disk_io{host_name="{{.hostname}}",device!~"loop.", device!~"tmpfs | nsfs"}[5m])" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "Independent Disk IO", "yAxisUnit": "binBps" }, { "description": "", "id": "7643eb3f-2dd6-4a21-803e-516e853f92e3", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "graph", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "{{direction}}", "name": "A", "query": "avg by(direction) (irate(system_disk_io{host_name="{{.hostname}}",device!~"loop.", device!~"tmpfs|nsfs"}[5m]))" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "Total Disk IO ", "yAxisUnit": "binBps" }, { "description": "", "id": "fb03ba5a-adb4-42fd-a082-adec2af1770e", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "graph", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "1m-average", "name": "A", "query": "system_cpu_load_average_1m{host_name="{{.hostname}}"}" }, { "disabled": false, "legend": "5m-average", "name": "B", "query": "system_cpu_load_average_5m{host_name="{{.hostname}}"}" }, { "disabled": false, "legend": "15m-average", "name": "C", "query": "system_cpu_load_average_15m{host_name="{{.hostname}}"}" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "Average CPU Load", "yAxisUnit": "none" }, { "description": "", "id": "bfd7825c-c9bc-4e7b-891b-1225eece07d8", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "graph", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "{{device}}-{{state}}", "name": "A", "query": "system_filesystem_usage{host_name="{{.hostname}}",device!~"/dev/loop.", device!~"tmpfs | nsfs"}" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "Independent File System Usage", "yAxisUnit": "bytes" }, { "description": "", "id": "ba153238-e3b2-4107-adb0-03c1ae1af905", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "graph", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "{{state}}", "name": "A", "query": "sum by(state) (system_filesystem_usage{host_name="{{.hostname}}",device!~"/dev/loop.", device!~"tmpfs | nsfs"})" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "Total File System Usage", "yAxisUnit": "bytes" }, { "description": "", "id": "d52bf781-af94-4a7e-b70d-816522065801", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "graph", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "{{direction}}", "name": "A", "query": "avg by(direction) (irate(system_disk_operations{host_name="{{.hostname}}",device!~"loop.",device!~"tmpfs|nsfs"}[5m]))" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "Total Disk Operations", "yAxisUnit": "ops" }, { "description": "", "id": "ea994cb5-a911-4d49-8d60-440b66e78c2f", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "value", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "", "name": "A", "query": "up{job_name=~"otel-collector"}" } ], "queryType": "promql" }, "queryData": { "data": { "queryData": [ { "legend": "", "metric": { "name": "up", "job_name": "otel-collector" }, "queryName": "A", "values": [[1685017435, "1"]] }, { "legend": "", "metric": { "name": "up", "job_name": "otel-collector-metrics" }, "queryName": "A", "values": [[1685017435, "1"]] } ] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "Agent Up", "yAxisUnit": "bool" }, { "description": "The average queue length of the requests that were issued to the device. It was previously known as Disk I/Os Weighted.\nUnit: aqu-sq - dimensionless (number of queued operations)", "id": "b9459168-fe63-4c58-b6a9-4d47accfa8ea", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "graph", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "{{device}}", "name": "A", "query": "irate(system_disk_weighted_io_time{host_name="{{.hostname}}",device!~"loop.", device!~"tmpfs|nsfs"}[5m])" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "Average Queue Size (aqu-sz)", "yAxisUnit": "none" }, { "description": "", "id": "315f1b8d-4ca4-4795-9335-42190bd1ab57", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "value", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "", "name": "A", "query": "sum by(host_name) (system_filesystem_usage{host_name="{{.hostname}}",state="used",device!~"/dev/loop.", device!~"tmpfs|nsfs"}) / sum by(host_name) (system_filesystem_usage{host_name="{{.hostname}}",device!~"/dev/loop.", device!~"tmpfs|nsfs"})" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "File System Usage", "yAxisUnit": "percentunit" }, { "description": "", "id": "a762f563-81a2-41a7-b85e-d9e8d5b8cac9", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "value", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "system_memory_usage", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "", "name": "A", "query": "sum by(host_name) (system_memory_usage{host_name="{{.hostname}}",state="used"}) / sum by(host_name) (system_memory_usage{host_name="{{.hostname}}"})" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "Memory Usage", "yAxisUnit": "percentunit" }, { "description": "", "id": "9da0e5b3-5a56-4619-92ce-2b43fb9af844", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "value", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "", "name": "A", "query": "1 - (avg by(host_name) (irate(system_cpu_time{host_name="{{.hostname}}",state="idle"}[5m])))" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "CPU Usage", "yAxisUnit": "percentunit" }, { "description": "", "id": "0d371069-67b9-49e5-8a73-a55568390f81", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "value", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "", "name": "A", "query": "avg by(host_name) (irate(system_disk_io{host_name="{{.hostname}}",direction="read",device!~"loop.", device!~"tmpfs|nsfs"}[5m]))" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "Disk IO (read)", "yAxisUnit": "binBps" }, { "description": "", "id": "1d79cd03-e79d-44e4-9016-6396b7d3ab26", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "value", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "", "name": "A", "query": "avg by(host_name) (irate(system_disk_io{host_name="{{.hostname}}", direction="write", device!~"loop.", device!~"tmpfs|nsfs"}[5m]))" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "Disk IO (write)", "yAxisUnit": "binBps" }, { "description": "", "id": "96529349-b3fb-481f-82db-75e75cf20af1", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "graph", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "{{state}}", "name": "A", "query": "sum by(host_name, state) (system_filesystem_inodes_usage{host_name="{{.hostname}}",device!~"/dev/loop.",device!~"tmpfs|nsfs"})" }, { "disabled": false, "legend": "", "name": "B", "query": "" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "Total Inode Usage", "yAxisUnit": "none" }, { "description": "", "id": "69bad098-ea78-46a1-81b2-6eb7b54b9b75", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "graph", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "{{device}}-{{state}}", "name": "A", "query": "system_filesystem_inodes_usage{host_name="{{.hostname}}",device!~"/dev/loop.",device!~"tmpfs|nsfs"}" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "Independent Inode Usage", "yAxisUnit": "none" }, { "description": "", "id": "b637ca7e-a03a-4b49-9344-6406ee66d313", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "value", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "", "name": "A", "query": "sum by(host_name) (system_filesystem_inodes_usage{host_name="{{.hostname}}",state="used",device!~"/dev/loop.",device!~"tmpfs|nsfs"}) / sum by(host_name) (system_filesystem_inodes_usage{host_name="{{.hostname}}",device!~"/dev/loop.",device!~"tmpfs|nsfs"})" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "Inode Usage", "yAxisUnit": "percentunit" }, { "description": "", "id": "16ddaf59-bad7-4559-96c2-c8c3eb4f9cd9", "isStacked": false, "nullZeroValues": "zero", "opacity": "1", "panelTypes": "graph", "query": { "builder": { "queryData": [ { "aggregateAttribute": { "dataType": "float64", "isColumn": true, "key": "", "type": "" }, "aggregateOperator": "noop", "dataSource": "metrics", "disabled": false, "expression": "A", "filters": { "items": [], "op": "AND" }, "groupBy": [], "having": [], "legend": "", "limit": 0, "offset": 0, "orderBy": [], "pageSize": 0, "queryName": "A", "reduceTo": "last", "stepInterval": 60 } ], "queryFormulas": [] }, "clickhouse_sql": [ { "disabled": false, "legend": "", "name": "A", "rawQuery": "" } ], "promql": [ { "disabled": false, "legend": "{{device}}-{{direction}}", "name": "A", "query": "irate(system_disk_operations{host_name="{{.hostname}}",device!~"loop.",device!~"tmpfs|nsfs"}[5m])" } ], "queryType": "promql" }, "queryData": { "data": { "legend": "", "query": "", "queryData": [] }, "error": false, "errorMessage": "", "loading": false }, "timePreferance": "GLOBAL_TIME", "title": "Independent Disk Operations", "yAxisUnit": "ops" } ] }
```

Now, we will open the SigNoz UI and in the **Dashboards** section, on the top right corner, there is a " **\+ New Dashboard** " button and then " **Import JSON** " option from the dropdown menu, we will paste the `JSON` code.

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1707720321813/4ef88748-4dfe-489d-a0ee-64f85b6713db.png align="center")

Then, " **Load JSON** "

### Applications Part

It's empty for now as we have not done the application's part. Let's proceed there.

In application's server, we need to setup the OTel Collector as an agent.

Follow the below commands -

```plaintext
$ wget https://github.com/open-telemetry/opentelemetry-collector-releases/releases/download/v0.79.0/otelcol-contrib_0.79.0_linux_amd64.deb
```

```plaintext
$ wget https://raw.githubusercontent.com/SigNoz/benchmark/main/docker/standalone/config.yaml
```

In the above config.yml file we need to provide the signoz server's ip address to send the host metrics and for this signoz will listen to port 4317.

```plaintext
    exporters:
	   otlp:
	     endpoint: "<SIGNOZ_IP_ADD>:4317"
	     tls:
	       insecure: true
```

Now, the application is sending the metrics to signoz and we can check our application's metrics details in the dashboard.

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1707720960735/d645273d-3336-4af2-af46-bc0708257709.png align="center")

We've successfully set up the **SigNoz** server and configured our application to send Docker **logs** and host **metrics** to it.

---

Thank you!🖤